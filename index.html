<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¸ªäººæˆé•¿æ¸¸æˆ</title>
    <!-- ä½¿ç”¨æœ€å®˜æ–¹ã€ç¨³å®šçš„VueJS CDN -->
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: white;
            padding: 20px;
            line-height: 1.6;
        }
        .container { max-width: 1000px; margin: 0 auto; }
        .header { text-align: center; margin-bottom: 40px; padding: 25px; background: rgba(255,255,255,0.1); border-radius: 20px; }
        .header h1 { font-size: 2.8em; margin-bottom: 10px; background: linear-gradient(45deg, #FFD700, #FFA500); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 25px; margin-bottom: 40px; }
        .card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.15);
        }
        .card h2 { margin-bottom: 20px; padding-bottom: 15px; border-bottom: 2px solid rgba(255,255,255,0.2); display: flex; align-items: center; gap: 10px; }
        .level-display { font-size: 4em; font-weight: bold; text-align: center; margin: 20px 0; background: linear-gradient(45deg, #FFD700, #FFA500); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .skill-progress { height: 20px; background: rgba(255,255,255,0.2); border-radius: 10px; margin: 15px 0; overflow: hidden; }
        .progress-fill { height: 100%; background: linear-gradient(90deg, #43e97b, #38f9d7); border-radius: 10px; transition: width 0.5s ease; }
        .task-item { padding: 18px; background: rgba(255,255,255,0.07); border-radius: 15px; margin: 12px 0; display: flex; justify-content: space-between; align-items: center; transition: all 0.3s; }
        .task-item:hover { background: rgba(255,255,255,0.12); transform: translateX(5px); }
        .task-item.completed { opacity: 0.6; background: rgba(76, 217, 100, 0.15); }
        .xp-badge { background: linear-gradient(45deg, #FFD700, #FFA500); color: black; padding: 5px 12px; border-radius: 15px; font-size: 0.85em; font-weight: bold; margin-left: 10px; }
        .btn {
            background: linear-gradient(90deg, #4facfe 0%, #00f2fe 100%);
            border: none; padding: 14px 28px; border-radius: 50px;
            color: white; cursor: pointer; font-size: 16px; font-weight: bold;
            transition: all 0.3s; display: block; width: 100%; margin-top: 15px;
        }
        .btn:hover { transform: translateY(-3px); box-shadow: 0 7px 14px rgba(0, 0, 0, 0.2); }
        .btn-sm { padding: 8px 20px; font-size: 0.9em; width: auto; }
        .energy-bar { display: flex; align-items: center; gap: 15px; margin: 20px 0; }
        .energy-fill { flex-grow: 1; height: 20px; background: rgba(255,255,255,0.2); border-radius: 10px; overflow: hidden; }
        .energy-value { height: 100%; background: linear-gradient(90deg, #ff9a9e, #fad0c4); border-radius: 10px; transition: width 0.5s; }
    </style>
</head>
<body>
    <!-- è¿™æ˜¯Vueåº”ç”¨æŒ‚è½½çš„æ ¹å…ƒç´ ï¼Œæ‰€æœ‰æ¸¸æˆå†…å®¹éƒ½åœ¨è¿™é‡Œ -->
    <div id="app" class="container">
        <div class="header">
            <h1>ğŸ® ä¸ªäººæˆé•¿æ¸¸æˆ</h1>
            <p>å¯è§†åŒ–ä½ çš„æ¯ä¸€æ¬¡è¿›æ­¥ | æ•°æ®è‡ªåŠ¨ä¿å­˜åœ¨æœ¬åœ°æµè§ˆå™¨ä¸­</p>
        </div>

        <div class="grid">
            <!-- ç©å®¶çŠ¶æ€é¢æ¿ -->
            <div class="card">
                <h2>ğŸ“Š ç©å®¶çŠ¶æ€</h2>
                <div class="level-display">Lv. {{ player.level }}</div>
                <div style="margin: 25px 0;">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                        <span>ç»éªŒå€¼ (XP):</span>
                        <span><strong>{{ player.xp }}</strong> / {{ player.nextLevelXp }}</span>
                    </div>
                    <div class="skill-progress">
                        <div class="progress-fill" :style="{ width: (player.xp / player.nextLevelXp * 100) + '%' }"></div>
                    </div>
                    <div style="text-align: center; margin-top: 10px; font-size: 0.95em; opacity: 0.9;">
                        è¿˜éœ€ {{ player.nextLevelXp - player.xp }} XP å‡çº§
                    </div>
                </div>

                <div class="energy-bar">
                    <span>âš¡ ä»Šæ—¥èƒ½é‡:</span>
                    <div class="energy-fill">
                        <div class="energy-value" :style="{ width: player.energy + '%' }"></div>
                    </div>
                    <span>{{ player.energy }}%</span>
                </div>

                <div style="margin-top: 25px; padding-top: 20px; border-top: 1px solid rgba(255,255,255,0.1);">
                    <p>ğŸ“… è¿ç»­ç™»å½•: <strong>{{ player.streak }}</strong> å¤© ğŸ”¥</p>
                    <button class="btn" @click="resetData" style="background:linear-gradient(90deg, #ff416c, #ff4b2b); margin-top:20px;">ğŸ”„ é‡ç½®æ‰€æœ‰æ•°æ®</button>
                </div>
            </div>

            <!-- ä»»åŠ¡åˆ—è¡¨ -->
            <div class="card">
                <h2>ğŸ¯ ä»Šæ—¥ä»»åŠ¡</h2>
                <p style="margin-bottom:20px; font-size:1.1em;">å®Œæˆåº¦: <strong>{{ completedTasksCount }}</strong> / {{ tasks.length }}</p>

                <div v-for="task in tasks" :key="task.id" class="task-item" :class="{ completed: task.completed }">
                    <div style="display: flex; align-items: center; gap: 12px;">
                        <input type="checkbox" v-model="task.completed" @change="completeTask(task)" style="width:20px; height:20px; cursor:pointer;">
                        <div>
                            <span style="font-size:1.2em; margin-right:8px;">{{ task.icon }}</span>
                            {{ task.name }}
                            <span class="xp-badge">+{{ task.xp }} XP</span>
                        </div>
                    </div>
                    <button class="btn-sm" @click="completeTask(task)" :disabled="task.completed">
                        {{ task.completed ? 'å·²å®Œæˆ' : 'å®Œæˆ' }}
                    </button>
                </div>

                <button class="btn" @click="addNewTask">â• æ·»åŠ è‡ªå®šä¹‰ä»»åŠ¡</button>
                <p style="margin-top:15px; font-size:0.9em; opacity:0.7; text-align:center;">å®Œæˆä»»åŠ¡å³å¯è·å¾—ç»éªŒå€¼ï¼Œç´¯ç§¯ç»éªŒå¯ä»¥å‡çº§ï¼</p>
            </div>

            <!-- æŠ€èƒ½æ ‘ -->
            <div class="card">
                <h2>ğŸ§  æˆ‘çš„æŠ€èƒ½æ ‘</h2>
                <div v-for="skill in skills" :key="skill.id" style="margin: 20px 0; padding: 20px; background: rgba(255,255,255,0.05); border-radius: 15px;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
                        <div style="display: flex; align-items: center; gap: 10px;">
                            <span style="font-size:1.8em;">{{ skill.icon }}</span>
                            <div>
                                <strong style="font-size:1.2em;">{{ skill.name }}</strong>
                                <div style="font-size:0.9em; opacity:0.8;">ç­‰çº§ {{ skill.level }}</div>
                            </div>
                        </div>
                        <button class="btn-sm" @click="practiceSkill(skill.id)" :disabled="player.energy < 10">ç»ƒä¹  (+10 XP)</button>
                    </div>
                    <div class="skill-progress">
                        <div class="progress-fill" :style="{ width: (skill.xp / skill.maxXp * 100) + '%' }"></div>
                    </div>
                    <div style="display: flex; justify-content: space-between; margin-top: 10px; font-size: 0.9em;">
                        <span>ç»éªŒ: {{ skill.xp }} / {{ skill.maxXp }}</span>
                        <span>è¿›åº¦: {{ Math.round(skill.xp / skill.maxXp * 100) }}%</span>
                    </div>
                </div>
                <button class="btn" @click="addNewSkill">ğŸŒŸ æ·»åŠ æ–°æŠ€èƒ½</button>
            </div>
        </div>

        <!-- ç®€å•çš„ç»Ÿè®¡ä¿¡æ¯ -->
        <div class="card" style="margin-top: 30px;">
            <h2>ğŸ“ˆ æˆé•¿æ¦‚è§ˆ</h2>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; text-align: center; margin-top: 20px;">
                <div>
                    <div style="font-size: 2.5em; font-weight: bold;">{{ totalXpEarned }}</div>
                    <div style="opacity: 0.8;">ç´¯è®¡è·å¾—ç»éªŒ</div>
                </div>
                <div>
                    <div style="font-size: 2.5em; font-weight: bold;">{{ tasksCompleted }}</div>
                    <div style="opacity: 0.8;">ç´¯è®¡å®Œæˆä»»åŠ¡</div>
                </div>
                <div>
                    <div style="font-size: 2.5em; font-weight: bold;">{{ totalSkillLevels }}</div>
                    <div style="opacity: 0.8;">æŠ€èƒ½æ€»ç­‰çº§</div>
                </div>
            </div>
            <p style="text-align: center; margin-top: 25px; padding-top: 20px; border-top: 1px solid rgba(255,255,255,0.1); font-size: 0.95em; opacity: 0.8;">
                æ•°æ®å·²è‡ªåŠ¨ä¿å­˜äºæœ¬åœ°ã€‚æ›´æ¢æµè§ˆå™¨æˆ–è®¾å¤‡å°†é‡æ–°å¼€å§‹ã€‚
            </p>
        </div>
    </div>

    <script>
        // Vue 3 åº”ç”¨ - æ ¸å¿ƒæ¸¸æˆé€»è¾‘
        const { createApp, ref, computed, onMounted } = Vue;

        createApp({
            setup() {
                // ---------- æ ¸å¿ƒæ•°æ® ----------
                const player = ref({
                    level: 1,
                    xp: 0,
                    nextLevelXp: 100,
                    energy: 100,
                    streak: 1
                });

                const tasks = ref([
                    { id: 1, name: "å­¦ä¹ ç¼–ç¨‹ 1 å°æ—¶", icon: "ğŸ’»", xp: 25, completed: false },
                    { id: 2, name: "å¥èº«é”»ç‚¼ 30 åˆ†é’Ÿ", icon: "ğŸ’ª", xp: 20, completed: false },
                    { id: 3, name: "é˜…è¯» 30 é¡µä¹¦ç±", icon: "ğŸ“š", xp: 15, completed: true },
                    { id: 4, name: "è§„åˆ’æ˜æ—¥ç›®æ ‡", icon: "ğŸ¯", xp: 10, completed: false }
                ]);

                const skills = ref([
                    { id: 1, name: "Python ç¼–ç¨‹", icon: "ğŸ", level: 3, xp: 150, maxXp: 200 },
                    { id: 2, name: "æ•°æ®åˆ†æ", icon: "ğŸ“Š", level: 2, xp: 80, maxXp: 150 },
                    { id: 3, name: "å¥èº«ä¹ æƒ¯", icon: "ğŸƒ", level: 4, xp: 320, maxXp: 400 },
                    { id: 4, name: "è‹±è¯­å­¦ä¹ ", icon: "ğŸ‡¬ğŸ‡§", level: 1, xp: 30, maxXp: 100 }
                ]);

                // ---------- è®¡ç®—å±æ€§ ----------
                const completedTasksCount = computed(() => {
                    return tasks.value.filter(t => t.completed).length;
                });

                const totalXpEarned = computed(() => {
                    // ç®€å•çš„ä¼°ç®—ï¼šå½“å‰XP + å·²å®Œæˆä»»åŠ¡XP
                    let earned = player.value.xp;
                    tasks.value.forEach(t => { if(t.completed) earned += t.xp; });
                    skills.value.forEach(s => earned += s.xp);
                    return earned;
                });

                const tasksCompleted = computed(() => {
                    return tasks.value.filter(t => t.completed).length;
                });

                const totalSkillLevels = computed(() => {
                    return skills.value.reduce((sum, skill) => sum + skill.level, 0);
                });

                // ---------- æ ¸å¿ƒæ–¹æ³• ----------
                const completeTask = (task) => {
                    if (!task.completed && player.value.energy >= 5) {
                        task.completed = true;
                        player.value.xp += task.xp;
                        player.value.energy -= 5;
                        checkLevelUp();
                        saveGameData();
                        // ç®€å•æç¤º
                        console.log(`å®Œæˆä»»åŠ¡ã€${task.name}ã€‘, è·å¾— ${task.xp} XPï¼`);
                    } else if (player.value.energy < 5) {
                        alert("èƒ½é‡ä¸è¶³ï¼è¯·ä¼‘æ¯æ¢å¤æˆ–å®Œæˆæ›´ç®€å•çš„ä»»åŠ¡ã€‚");
                    }
                };

                const practiceSkill = (skillId) => {
                    const skill = skills.value.find(s => s.id === skillId);
                    if (skill && player.value.energy >= 10) {
                        skill.xp += 10;
                        player.value.energy -= 10;
                        player.value.xp += 5; // ç»ƒä¹ ä¹Ÿè·å¾—å°‘é‡é€šç”¨XP

                        // æ£€æŸ¥æŠ€èƒ½å‡çº§
                        if (skill.xp >= skill.maxXp) {
                            skill.level++;
                            skill.xp = 0;
                            skill.maxXp = Math.floor(skill.maxXp * 1.5); // ä¸‹ä¸€çº§æ‰€éœ€XPå¢åŠ 
                            alert(`ğŸ‰ æ­å–œï¼ã€${skill.name}ã€‘æå‡åˆ°ç­‰çº§ ${skill.level}ï¼`);
                        }

                        checkLevelUp();
                        saveGameData();
                    } else if (player.value.energy < 10) {
                        alert("èƒ½é‡ä¸è¶³ï¼Œæ— æ³•ç»ƒä¹ æŠ€èƒ½ï¼");
                    }
                };

                const checkLevelUp = () => {
                    while (player.value.xp >= player.value.nextLevelXp) {
                        player.value.level++;
                        player.value.xp -= player.value.nextLevelXp;
                        player.value.nextLevelXp = Math.floor(player.value.nextLevelXp * 1.5);
                        player.value.energy = 100; // å‡çº§å›æ»¡èƒ½é‡
                        alert(`ğŸš€ ç¥è´ºä½ å‡çº§äº†ï¼ç°åœ¨æ˜¯ ç­‰çº§ ${player.value.level}ï¼`);
                    }
                };

                const addNewTask = () => {
                    const name = prompt("è¯·è¾“å…¥æ–°ä»»åŠ¡çš„åç§°ï¼š", "ä¾‹å¦‚ï¼šå†™ä¸€ç¯‡æ—¥è®°");
                    if (name && name.trim()) {
                        const xp = parseInt(prompt("è®¾ç½®å®Œæˆè¯¥ä»»åŠ¡å¯è·å¾—çš„ç»éªŒå€¼ï¼ˆXPï¼‰ï¼š", "15")) || 15;
                        const icon = prompt("é€‰ä¸€ä¸ªè¡¨æƒ…å›¾æ ‡ï¼š", "âœ…");
                        tasks.value.push({
                            id: Date.now(),
                            name: name.trim(),
                            icon: icon || "âœ…",
                            xp: Math.max(5, Math.min(xp, 50)), // é™åˆ¶åœ¨5-50ä¹‹é—´
                            completed: false
                        });
                        saveGameData();
                    }
                };

                const addNewSkill = () => {
                    const name = prompt("è¯·è¾“å…¥ä½ æƒ³åŸ¹å…»çš„æ–°æŠ€èƒ½ï¼š", "ä¾‹å¦‚ï¼šå…¬å¼€æ¼”è®²");
                    if (name && name.trim()) {
                        const icon = prompt("é€‰ä¸€ä¸ªä»£è¡¨å®ƒçš„å›¾æ ‡ï¼š", "ğŸŒŸ");
                        skills.value.push({
                            id: Date.now(),
                            name: name.trim(),
                            icon: icon || "ğŸŒŸ",
                            level: 1,
                            xp: 0,
                            maxXp: 100
                        });
                        saveGameData();
                    }
                };

                const resetData = () => {
                    if (confirm("âš ï¸  ç¡®å®šè¦é‡ç½®æ‰€æœ‰æ¸¸æˆæ•°æ®å—ï¼Ÿè¿™å°†æ¸…é™¤æ‰€æœ‰è¿›åº¦ï¼Œä¸å¯æ¢å¤ï¼")) {
                        player.value = { level:1, xp:0, nextLevelXp:100, energy:100, streak:1 };
                        tasks.value = [
                            { id:1, name:"å­¦ä¹ ç¼–ç¨‹1å°æ—¶", icon:"ğŸ’»", xp:25, completed:false },
                            { id:2, name:"å¥èº«30åˆ†é’Ÿ", icon:"ğŸ’ª", xp:20, completed:false }
                        ];
                        skills.value = [
                            { id:1, name:"Pythonç¼–ç¨‹", icon:"ğŸ", level:3, xp:150, maxXp:200 }
                        ];
                        localStorage.removeItem('growthGameDataV2');
                        alert("æ•°æ®å·²é‡ç½®ï¼Œæ¸¸æˆé‡æ–°å¼€å§‹ï¼");
                    }
                };

                // ---------- æ•°æ®æŒä¹…åŒ– ----------
                const saveGameData = () => {
                    const gameData = {
                        player: player.value,
                        tasks: tasks.value,
                        skills: skills.value,
                        savedAt: new Date().toISOString()
                    };
                    localStorage.setItem('growthGameDataV2', JSON.stringify(gameData));
                };

                const loadGameData = () => {
                    const saved = localStorage.getItem('growthGameDataV2');
                    if (saved) {
                        try {
                            const data = JSON.parse(saved);
                            if (data.player) player.value = data.player;
                            if (data.tasks) tasks.value = data.tasks;
                            if (data.skills) skills.value = data.skills;
                            console.log('æ¸¸æˆæ•°æ®åŠ è½½æˆåŠŸï¼');
                        } catch (e) {
                            console.error('åŠ è½½ä¿å­˜æ•°æ®æ—¶å‡ºé”™:', e);
                        }
                    }
                };

                // ---------- åˆå§‹åŒ– ----------
                onMounted(() => {
                    loadGameData();
                    console.log('ğŸ® ä¸ªäººæˆé•¿æ¸¸æˆå·²å¯åŠ¨ï¼');
                });

                // æš´éœ²ç»™æ¨¡æ¿ä½¿ç”¨
                return {
                    player,
                    tasks,
                    skills,
                    completedTasksCount,
                    totalXpEarned,
                    tasksCompleted,
                    totalSkillLevels,
                    completeTask,
                    practiceSkill,
                    addNewTask,
                    addNewSkill,
                    resetData
                };
            }
        }).mount('#app'); // æŒ‚è½½åˆ°idä¸ºâ€œappâ€çš„DOMå…ƒç´ ä¸Š
    </script>
</body>
</html>
